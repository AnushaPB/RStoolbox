<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is an accessor function to quickly access information stored in ImageMetaData, e.g. scale factor per band.
Intended for use with imagery which was imported using stackMeta. Will return parameters using the actual band order in img."><title>Extract bandwise information from ImageMetaData — getMeta • RStoolbox</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract bandwise information from ImageMetaData — getMeta"><meta property="og:description" content="This is an accessor function to quickly access information stored in ImageMetaData, e.g. scale factor per band.
Intended for use with imagery which was imported using stackMeta. Will return parameters using the actual band order in img."><meta property="og:image" content="https://bleutner.github.io/RStoolbox/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RStoolbox</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="http://www.github.com/bleutner">
    <span class="fa fa-github fa-lg fab"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extract bandwise information from ImageMetaData</h1>
      <small class="dont-index">Source: <a href="https://github.com/bleutner/RStoolbox/blob/HEAD/R/getMeta.R" class="external-link"><code>R/getMeta.R</code></a></small>
      <div class="d-none name"><code>getMeta.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is an accessor function to quickly access information stored in ImageMetaData, e.g. scale factor per band.
Intended for use with imagery which was imported using stackMeta. Will return parameters using the actual band order in img.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getMeta</span><span class="op">(</span><span class="va">img</span>, <span class="va">metaData</span>, <span class="va">what</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>img</dt>
<dd><p>SpatRaster or character vector with band names.</p></dd>


<dt>metaData</dt>
<dd><p>ImageMetaData or path to meta data file.</p></dd>


<dt>what</dt>
<dd><p>Character. Parameter to extract. Either data descriptors, or conversion parameters (see Details for options)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>what</code> is one of <code>c('CALRAD', 'CALBT', 'CALREF')</code> a data.frame is returned with bands in rows (order corresponding to <code>img</code> band order). 
Otherwise a named numeric vector with the corresponding parameter is returned (layernames as names).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Possible metadata parameters (<code>what</code> argument):</p>
<p>Data descriptors</p><table class="table table"><tr><td>'FILES'</td><td></td></tr><tr><td>'QUANTITY'</td><td></td></tr><tr><td>'CATEGORY'</td><td></td></tr><tr><td>'NA_VALUE'</td><td></td></tr><tr><td>'SATURATE_VALUE'</td><td></td></tr><tr><td>'SCALE_FACTOR'</td><td></td></tr><tr><td>'DATA_TYPE'</td><td></td></tr><tr><td>'SPATIAL_RESOLUTION'</td><td></td></tr></table><p>Conversion parameters</p><table class="table table"><tr><td>'CALRAD'</td><td>Conversion parameters from DN to radiance</td></tr><tr><td>'CALBT'</td><td>Conversion parameters from radiance to brightness temperature</td></tr><tr><td>'CALREF'</td><td>Conversion parameters from DN to reflectance (Landsat 8 only)</td></tr></table></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Import example data</span></span></span>
<span class="r-in"><span><span class="va">mtlFile</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/landsat/LT52240631988227CUB02_MTL.txt"</span>, package<span class="op">=</span><span class="st">"RStoolbox"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="readMeta.html">readMeta</a></span><span class="op">(</span><span class="va">mtlFile</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lsat_t</span> <span class="op">&lt;-</span> <span class="fu"><a href="stackMeta.html">stackMeta</a></span><span class="op">(</span><span class="va">mtlFile</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get integer scale factors</span></span></span>
<span class="r-in"><span><span class="fu">getMeta</span><span class="op">(</span><span class="va">lsat_t</span>, metaData <span class="op">=</span> <span class="va">meta</span>, what <span class="op">=</span> <span class="st">"SCALE_FACTOR"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B1_dn B2_dn B3_dn B4_dn B5_dn B6_dn B7_dn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     1     1     1     1     1     1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Conversion factors for brightness temperature</span></span></span>
<span class="r-in"><span><span class="fu">getMeta</span><span class="op">(</span><span class="st">"B6_dn"</span>, metaData <span class="op">=</span> <span class="va">meta</span>, what <span class="op">=</span> <span class="st">"CALBT"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           K1      K2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B6_dn 607.76 1260.56</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Conversion factors to top-of-atmosphere radiance</span></span></span>
<span class="r-in"><span><span class="co">## Band order not corresponding to metaData order</span></span></span>
<span class="r-in"><span><span class="fu">getMeta</span><span class="op">(</span><span class="va">lsat_t</span><span class="op">[[</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, metaData <span class="op">=</span> <span class="va">meta</span>, what <span class="op">=</span> <span class="st">"CALRAD"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         offset  gain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B5_dn -0.49035 0.120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B4_dn -2.38602 0.876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B3_dn -2.21398 1.044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B2_dn -4.16220 1.322</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B1_dn -2.19134 0.671</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get integer scale factors</span></span></span>
<span class="r-in"><span><span class="fu">getMeta</span><span class="op">(</span><span class="va">lsat_t</span>, metaData <span class="op">=</span> <span class="va">meta</span>, what <span class="op">=</span> <span class="st">"SCALE_FACTOR"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B1_dn B2_dn B3_dn B4_dn B5_dn B6_dn B7_dn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     1     1     1     1     1     1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get file basenames</span></span></span>
<span class="r-in"><span><span class="fu">getMeta</span><span class="op">(</span><span class="va">lsat_t</span>, metaData <span class="op">=</span> <span class="va">meta</span>, what <span class="op">=</span> <span class="st">"FILES"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          B1_dn                          B2_dn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "LT52240631988227CUB02_B1.TIF" "LT52240631988227CUB02_B2.TIF" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          B3_dn                          B4_dn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "LT52240631988227CUB02_B3.TIF" "LT52240631988227CUB02_B4.TIF" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          B5_dn                          B6_dn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "LT52240631988227CUB02_B5.TIF" "LT52240631988227CUB02_B6.TIF" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          B7_dn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "LT52240631988227CUB02_B7.TIF" </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Benjamin Leutner, Ned Horning, Jakob Schwalb-Willmann, Konstantin Mueller.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer></div>

  

  

  </body></html>

